
//: Declare String Begin

/*: "formatType" :*/
fileprivate let showEqualMsg:String = "inputorm"
fileprivate let noti_mainIdent:[Character] = ["a","t","T","y","p","e"]

/*: "plain" :*/
fileprivate let mainPopMessage:[Character] = ["p","l","a","i","n"]

/*: "init(coder:) has not been implemented" :*/
fileprivate let kToUrl:[UInt8] = [0xb7,0xbc,0xb7,0xc2,0x76,0xb1,0xbd,0xb2,0xb3,0xc0,0x88,0x77,0x6e,0xb6,0xaf,0xc1,0x6e,0xbc,0xbd,0xc2,0x6e,0xb0,0xb3,0xb3,0xbc,0x6e,0xb7,0xbb,0xbe,0xba,0xb3,0xbb,0xb3,0xbc,0xc2,0xb3,0xb2]

fileprivate func senseName(component num: UInt8) -> UInt8 {
    let value = Int(num) + 178
    if value > 255 {
        return UInt8(value - 256)
    } else {
        return UInt8(value)
    }
}

/*: "#FF2348" :*/
fileprivate let kRenderText:[Character] = ["#","F","F","2","3"]
fileprivate let appDateMsg:String = "48"

/*: "icon_lounge" :*/
fileprivate let k_statusId:[Character] = ["i","c","o","n","_","l"]
fileprivate let appVideoTitle:String = "OUNGE"

/*: "icon_home_v" :*/
fileprivate let show_uniformTitle:[Character] = ["i","c","o","n","_","h","o","m","e","_","v"]

/*: "icon_chat_list_new" :*/
fileprivate let appWhiteMsg:String = "title data the style itemicon_c"
fileprivate let show_matchStr:String = "hamore"
fileprivate let userGiftValue:[Character] = ["_","l","i","s","t","_","n","e","w"]

/*: "Official" :*/
fileprivate let app_colorIdent:String = "Officiobservation foundation my"
fileprivate let main_userMsg:[Character] = ["a","l"]

/*: "#30D00B" :*/
fileprivate let main_backgroundName:String = "link model tag request#30D00B"

/*: "iv_message_honey" :*/
fileprivate let k_inputPath:[Character] = ["i","v","_","m","e"]
fileprivate let appFrameButtonData:String = "empty corner midssage_"

/*: "#FF60B9" :*/
fileprivate let noti_colorData:String = "#FF60app image frame"
fileprivate let app_makeMessage:String = "kit9"

/*: "#EEEEEE" :*/
fileprivate let user_loadUrl:String = "return manager right data#EEEEEE"

/*: "opacity" :*/
fileprivate let dreamSelectMsg:[Character] = ["o","p","a","c","i","t","y"]

/*: "path" :*/
fileprivate let app_numberKey:String = "plisth"

/*: "extra" :*/
fileprivate let app_withId:[Character] = ["e","x","t","r","a"]

/*: "msgInfo" :*/
fileprivate let kKeyRowMessage:[Character] = ["m","s","g","I","n","f","o"]

/*: "content" :*/
fileprivate let mPathPicMessage:[Character] = ["c","o","n","t","e","n","t"]

/*: "messageType" :*/
fileprivate let mFeeStr:String = "messarray"

/*: "[Reply messages to get points]" :*/
fileprivate let notiClearSharedText:String = "super at gift data view[Reply"
fileprivate let appViewNeedTrueMsg:[Character] = [" ","t","o"," ","g","e","t"," ","p","o","i","n","t","s","]"]

/*: "title" :*/
fileprivate let notiIndicatorFormat:String = "deviceidevicele"

/*: "img" :*/
fileprivate let notiMakeOfKey:String = "maymg"

/*: "[Photo]" :*/
fileprivate let dream_labFormat:[Character] = ["[","P","h","o","t","o"]
fileprivate let m_rowUrl:String = "regular"

/*: "[Audio]" :*/
fileprivate let app_onStr:String = "[Audio]super case shared value extension"

/*: "rYMsgType" :*/
fileprivate let m_dataText:[Character] = ["r","Y","M","s","g","T","y","p","e"]

/*: "GJ:CallCustom" :*/
fileprivate let k_componentUrl:String = "private container gender model forGJ:Ca"
fileprivate let dream_requestMaxMomentPath:String = "stomessage"

/*: "callCmd" :*/
fileprivate let k_itemFormat:[Character] = ["c","a","l","l","C"]
fileprivate let show_dataValue:[Character] = ["m","d"]

/*: "missCall" :*/
fileprivate let userIndexFormat:String = "equal with statusmissCall"

/*: "[Missed Call]" :*/
fileprivate let main_makeContent:String = "[Misslabel self voice explain"

/*: "logType" :*/
fileprivate let mainCenterEffectData:String = "text invitelogType"

/*: "[Voice Call]" :*/
fileprivate let user_requestFormat:[Character] = ["[","V","o","i","c","e"]
fileprivate let mainSizeKey:String = " Call]self if info"

/*: "[Video Call]" :*/
fileprivate let user_colorValue:[Character] = ["[","V","i","d","e","o"," ","C","a","l","l","]"]

/*: "video" :*/
fileprivate let kMakeActualEqualData:String = "vnameeo"

/*: "contentType" :*/
fileprivate let k_tabData:String = "CONT"
fileprivate let notiVoiceKey:String = "pop untilentType"

/*: "VideoMsg" :*/
fileprivate let show_sizeUrl:[Character] = ["V","i","d","e","o","M","s","g"]

/*: "[Short Video]" :*/
fileprivate let showReadValue:String = "index user top make level[Sho"
fileprivate let kPerspectiveText:[Character] = ["i","d","e","o","]"]

/*: "match" :*/
fileprivate let appTextValue:String = "mwithtch"

/*: "[Cupid messaging]" :*/
fileprivate let noti_viewSenseName:String = "hidden accept name[Cupi"
fileprivate let dream_kitPlayerValue:String = "make block return loadaging]"

/*: "GJ:Sess:TxtCustom" :*/
fileprivate let user_curValue:String = "GJ:Seheight title bar"
fileprivate let dreamCountMsg:String = "to target succeed slidextCustom"

/*: "isSend" :*/
fileprivate let mMoveMessage:[Character] = ["i"]
fileprivate let app_showUrl:String = "than var view directionsSend"

/*: "Sent Gift" :*/
fileprivate let kCurId:[Character] = ["S","e"]
fileprivate let userEmptyName:String = "fatal with viewnt Gift"

/*: "Receive Gift" :*/
fileprivate let appColorText:String = "Receiup net time"
fileprivate let k_errorText:String = "pair"
fileprivate let mValueId:[Character] = [" ","G","i","f","t"]

/*: "uid" :*/
fileprivate let main_priorityText:[Character] = ["u","i","d"]

/*: "gift" :*/
fileprivate let dream_labWillName:[Character] = ["g","i","f","t"]

/*: "name" :*/
fileprivate let userResultValue:[Character] = ["n","a","m","e"]

/*: "num" :*/
fileprivate let dream_activeUrl:[Character] = ["n","u","m"]

/*:   :*/
fileprivate let kGroupMessage:String = "model"

/*:  x :*/
fileprivate let showReloadValue:String = "ting hidden x"

/*: "imageUri" :*/
fileprivate let dream_allPath:[Character] = ["i","m","a","g","e","U"]
fileprivate let dreamMediumKey:String = "rtab"

/*: "imageData" :*/
fileprivate let dreamUserShareMsg:String = "imagplay"
fileprivate let appColorAddUrl:String = "Datasucceed index import"

/*: "<img>" :*/
fileprivate let k_styleKey:String = "self return self view start<img>"

/*: "</img>" :*/
fileprivate let showReceiveMsg:String = "</img>error number label right"

/*: "wantGift" :*/
fileprivate let dream_viewText:String = "wantGifview page let click model"
fileprivate let m_countInviteText:String = "equal"

/*: "intimatePhoto" :*/
fileprivate let appValueKey:[Character] = ["i","n","t","i","m","a","t","e","P","h","o"]
fileprivate let kReportValue:String = "ttime"

/*: "audioData" :*/
fileprivate let k_backgroundStr:String = "audstatus"
fileprivate let dreamSizeIdent:String = "color"

/*: "audioUri" :*/
fileprivate let mainTempKey:String = "aukeyi"

/*: "draftContent" :*/
fileprivate let user_textTitle:String = "draftCif value manager tool talk"
fileprivate let k_layerEffectFormat:String = "T"

/*: "[draft]%@" :*/
fileprivate let noti_hiddenFormat:String = "path clear[draft"
fileprivate let show_noPushValue:[Character] = ["]","%","@"]

/*: "99999+" :*/
fileprivate let dream_layerMsg:[UInt8] = [0xb1,0xb1,0xb1,0xb1,0xb1,0xa3]

private func startLog(app num: UInt8) -> UInt8 {
    return num ^ 136
}

/*: "New" :*/
fileprivate let noti_quitMessage:[Character] = ["N","e","w"]

/*: "99+" :*/
fileprivate let notiListStr:String = "commitcommit+"

/*: "Account is restrictedÔºÅ" :*/
fileprivate let k_normalName:String = "Accoutext label equal data"
fileprivate let noti_originContent:String = "estsystem"

/*: "%@ Online" :*/
fileprivate let userModelPath:String = "%@ Odata data guard class if"
fileprivate let user_cornerSuccessReturnValue:String = "makelimakee"

/*: "Messages not been replied here" :*/
fileprivate let notiActualManagerStr:String = "self status close let selfMessages "
fileprivate let app_phoneData:String = "not bdata super text add self"
fileprivate let user_frameIndicatorFormat:String = "moment meaneen re"
fileprivate let dream_makeId:String = "hetoe"

//: Declare String End

// __DEBUG__
// __CLOSE_PRINT__
//
//  TextCellView.swift
//  AbroadTalking
//
//  Created by Hemming on 2022/9/12.
//

//: import UIKit
import UIKit

//: let RCSystemFormatType                 = "formatType"
let kRecordData = (showEqualMsg.replacingOccurrences(of: "input", with: "f") + String(noti_mainIdent))
//: let RCSystemFormatTypePlain            = "plain"
let kNoValue = (String(mainPopMessage))

//: class TalkingChatListTableCell: UITableViewCell {
class TextCellView: UITableViewCell {
    //: required init?(coder: NSCoder) {
    required init?(coder: NSCoder) {
        //: super.init(coder: coder)
        super.init(coder: coder)
        //: fatalError("init(coder:) has not been implemented")
        fatalError(String(bytes: kToUrl.map{senseName(component: $0)}, encoding: .utf8)!)
    }

    //: override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
    override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
        //: super.init(style: style, reuseIdentifier: reuseIdentifier)
        super.init(style: style, reuseIdentifier: reuseIdentifier)
        //: createCellUI()
        createUi()
        //: createCellUIConstraints()
        nowadaysConstraints()
    }

    // MARK: - Lazy load

    //: private lazy var headImgView: UIImageView = {
    private lazy var headImgView: UIImageView = {
        //: let imageView = UIImageView.init()
        let imageView = UIImageView()
        //: imageView.layer.cornerRadius = 30
        imageView.layer.cornerRadius = 30
        //: imageView.clipsToBounds = true
        imageView.clipsToBounds = true
        //: imageView.backgroundColor = UIColor.white
        imageView.backgroundColor = UIColor.white
        //: imageView.contentMode = .scaleAspectFill
        imageView.contentMode = .scaleAspectFill
        //: return imageView
        return imageView
        //: }()
    }()

    //: private lazy var iconBorder: UIButton = {
    private lazy var iconBorder: UIButton = {
        //: let btn = UIButton.init()
        let btn = UIButton()
        //: btn.imageView?.contentMode = .scaleAspectFill
        btn.imageView?.contentMode = .scaleAspectFill
        //: btn.isUserInteractionEnabled = false
        btn.isUserInteractionEnabled = false
        //: self.addSubview(btn)
        self.addSubview(btn)
        //: return btn
        return btn
        //: }()
    }()

    //: private lazy var badgeLab: UILabel = {
    private lazy var badgeLab: UILabel = {
        //: let label = UILabel.init()
        let label = UILabel()
        //: label.font = .pingfangFont(type: .Medium, fontSize: 13)
        label.font = .fontFile(type: .Medium, fontSize: 13)
        //: label.textAlignment = .center
        label.textAlignment = .center
        //: label.textColor = .white
        label.textColor = .white
        //: label.backgroundColor = UIColor(hex: "#FF2348")
        label.backgroundColor = UIColor(hex: (String(kRenderText) + appDateMsg.capitalized))
        //: label.layer.cornerRadius = 10
        label.layer.cornerRadius = 10
        //: label.layer.masksToBounds = true
        label.layer.masksToBounds = true
        //: label.layer.borderColor = UIColor.white.cgColor
        label.layer.borderColor = UIColor.white.cgColor
        //: label.layer.borderWidth = 1
        label.layer.borderWidth = 1
        //: label.isHidden = true
        label.isHidden = true
        //: return label
        return label
        //: }()
    }()

    //: private lazy var nickNameLabel: UILabel = {
    private lazy var nickNameLabel: UILabel = {
        //: let label = UILabel.init()
        let label = UILabel()
        //: label.font = .pingfangFont(type: .Medium, fontSize: 18)
        label.font = .fontFile(type: .Medium, fontSize: 18)
        //: label.textColor = .appTitleColor()
        label.textColor = .startMake()
        //: return label
        return label
        //: }()
    }()

    //: private lazy var msgShowLabel: UILabel = {
    private lazy var msgShowLabel: UILabel = {
        //: let label = UILabel.init()
        let label = UILabel()
        //: label.font = .pingfangFont(type: .Regular, fontSize: 15)
        label.font = .fontFile(type: .Regular, fontSize: 15)
        //: label.textColor = .appValueDetailColor()
        label.textColor = .totalervertebralDisc()
        //: return label
        return label
        //: }()
    }()

    //: private lazy var timeLab: UILabel = {
    private lazy var timeLab: UILabel = {
        //: let label = UILabel.init()
        let label = UILabel()
        //: label.font = .pingfangFont(type: .Medium, fontSize: 12)
        label.font = .fontFile(type: .Medium, fontSize: 12)
        //: label.textColor = .appValueDetailColor()
        label.textColor = .totalervertebralDisc()
        //: return label
        return label
        //: }()
    }()

    //: lazy var loungeImgV: UIImageView = {
    lazy var loungeImgV: UIImageView = {
        //: let img = UIImageView()
        let img = UIImageView()
        //: img.image = UIImage.BundleImageNamed(name: "icon_lounge")
        img.image = UIImage.namedImageNameBundle(name: (String(k_statusId) + appVideoTitle.lowercased()))
        //: return img
        return img
        //: }()
    }()

    //: private lazy var authImgV: UIImageView = {
    private lazy var authImgV: UIImageView = {
        //: let imgV = UIImageView()
        let imgV = UIImageView()
        //: imgV.image = UIImage.BundleImageNamed(name: "icon_home_v")
        imgV.image = UIImage.namedImageNameBundle(name: (String(show_uniformTitle)))
        //: return imgV
        return imgV
        //: }()
    }()

    //: private lazy var newImgV: TalkingButton = {
    private lazy var newImgV: RowView = {
        //: let imgV = TalkingButton()
        let imgV = RowView()
        //: imgV.setBackgroundImage(UIImage.BundleImageNamed(name: "icon_chat_list_new"), for: .normal)
        imgV.setBackgroundImage(UIImage.namedImageNameBundle(name: (String(appWhiteMsg.suffix(6)) + show_matchStr.replacingOccurrences(of: "more", with: "t") + String(userGiftValue))), for: .normal)
        //: return imgV
        return imgV
        //: }()
    }()

    //: private lazy var officialImgV: UIButton = {
    private lazy var officialImgV: UIButton = {
        //: let img = UIButton()
        let img = UIButton()
        //: img.setBackgroundColor(color: UIColor.msgTipsColor(), forState: .normal)
        img.note(color: UIColor.tableTag(), forState: .normal)
        //: img.setTitle("Official".localized, for: .normal)
        img.setTitle((String(app_colorIdent.prefix(6)) + String(main_userMsg)).localized, for: .normal)
        //: img.setTitleColor(.white, for: .normal)
        img.setTitleColor(.white, for: .normal)
        //: img.titleLabel?.font = UIFont.pingfangRugularFont(fontSize: 11)
        img.titleLabel?.font = UIFont.font(fontSize: 11)
        //: img.layer.cornerRadius = 8
        img.layer.cornerRadius = 8
        //: img.layer.masksToBounds = true
        img.layer.masksToBounds = true
        //: return img
        return img
        //: }()
    }()

    //: private lazy var onlineStatus: UIView = {
    private lazy var onlineStatus: UIView = {
        //: let v = UIView()
        let v = UIView()
        //: v.backgroundColor = UIColor(hex: "#30D00B")
        v.backgroundColor = UIColor(hex: (String(main_backgroundName.suffix(7))))
        //: v.layer.cornerRadius = 5
        v.layer.cornerRadius = 5
        //: v.layer.borderColor = UIColor.white.cgColor
        v.layer.borderColor = UIColor.white.cgColor
        //: v.layer.borderWidth = 1
        v.layer.borderWidth = 1
        //: v.isHidden = true
        v.isHidden = true
        //: return v
        return v
        //: }()
    }()

    //: private lazy var imtimateBtn: TalkingButton = {
    private lazy var imtimateBtn: RowView = {
        //: let btn = TalkingButton.init()
        let btn = RowView()
        //: btn.setImage(UIImage.BundleImageNamed(name: "iv_message_honey"), for: .normal)
        btn.setImage(UIImage.namedImageNameBundle(name: (String(k_inputPath) + String(appFrameButtonData.suffix(6)) + "honey")), for: .normal)
        //: btn.spaceBetweenTitleAndImage = 2
        btn.spaceBetweenTitleAndImage = 2
        //: btn.titleLabel?.font = .pingfangFont(type: .Medium, fontSize: 12)
        btn.titleLabel?.font = .fontFile(type: .Medium, fontSize: 12)
        //: btn.setTitleColor(UIColor.init(hex: "#FF60B9"), for: .normal)
        btn.setTitleColor(UIColor(hex: (String(noti_colorData.prefix(5)) + app_makeMessage.replacingOccurrences(of: "kit", with: "B"))), for: .normal)
        //: btn.contentHorizontalAlignment = .right
        btn.contentHorizontalAlignment = .right
        //: if LanguageManager.shared.direction == .rightToLeft {
        if ManagerThen.shared.direction == .rightToLeft {
            //: btn.contentHorizontalAlignment = .left
            btn.contentHorizontalAlignment = .left
        }
        //: return btn
        return btn
        //: }()
    }()
}

//: extension TalkingChatListTableCell {
extension TextCellView {
    //: override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {
    override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {
        //: let animationColor = UIColor.init(hex: "#EEEEEE")
        let animationColor = UIColor(hex: (String(user_loadUrl.suffix(7))))
        //: let animationDuration: Double = 0.4
        let animationDuration = 0.4

        //: super.touchesBegan(touches, with: event)
        super.touchesBegan(touches, with: event)
        //: let coverView = UIView(frame: bounds)
        let coverView = UIView(frame: bounds)
        //: coverView.autoresizingMask = [.flexibleWidth, .flexibleHeight]
        coverView.autoresizingMask = [.flexibleWidth, .flexibleHeight]
        //: coverView.backgroundColor = UIColor.clear
        coverView.backgroundColor = UIColor.clear
        //: self.addSubview(coverView)
        self.addSubview(coverView)

        //: let touch = touches.first!
        let touch = touches.first!
        //: let point = touch.location(in: self)
        let point = touch.location(in: self)

        //: let ourTouchView = UIView(frame: CGRect(x: point.x - 5, y: point.y - 5, width: 10, height: 10))
        let ourTouchView = UIView(frame: CGRect(x: point.x - 5, y: point.y - 5, width: 10, height: 10))

        //: let circleMaskPathInitial = UIBezierPath(ovalIn: ourTouchView.frame)
        let circleMaskPathInitial = UIBezierPath(ovalIn: ourTouchView.frame)
        //: let pathRect = self.bounds.inset(by: UIEdgeInsets(top: 1, left: 1, bottom: 1, right: 1))
        let pathRect = self.bounds.inset(by: UIEdgeInsets(top: 1, left: 1, bottom: 1, right: 1))
        //: let circleMaskPathFinal = UIBezierPath(roundedRect: pathRect, cornerRadius: 5)
        let circleMaskPathFinal = UIBezierPath(roundedRect: pathRect, cornerRadius: 5)

        //: let rippleLayer = CAShapeLayer()
        let rippleLayer = CAShapeLayer()
        //: rippleLayer.opacity = 1.0
        rippleLayer.opacity = 1.0
        //: rippleLayer.fillColor = animationColor?.cgColor
        rippleLayer.fillColor = animationColor?.cgColor
        //: rippleLayer.path = circleMaskPathFinal.cgPath
        rippleLayer.path = circleMaskPathFinal.cgPath
        //: coverView.layer.addSublayer(rippleLayer)
        coverView.layer.addSublayer(rippleLayer)

        // fade up
        //: let fadeUp = CABasicAnimation(keyPath: "opacity")
        let fadeUp = CABasicAnimation(keyPath: (String(dreamSelectMsg)))
        //: fadeUp.beginTime = CACurrentMediaTime()
        fadeUp.beginTime = CACurrentMediaTime()
        //: fadeUp.duration = 0.1
        fadeUp.duration = 0.1
        //: fadeUp.toValue = 0.8
        fadeUp.toValue = 0.8
        //: fadeUp.timingFunction = CAMediaTimingFunction(name: CAMediaTimingFunctionName.easeOut)
        fadeUp.timingFunction = CAMediaTimingFunction(name: CAMediaTimingFunctionName.easeOut)
        //: fadeUp.fillMode = CAMediaTimingFillMode.forwards
        fadeUp.fillMode = CAMediaTimingFillMode.forwards
        //: fadeUp.isRemovedOnCompletion = false
        fadeUp.isRemovedOnCompletion = false
        //: rippleLayer.add(fadeUp, forKey: nil)
        rippleLayer.add(fadeUp, forKey: nil)

        // fade down
        //: let fade = CABasicAnimation(keyPath: "opacity")
        let fade = CABasicAnimation(keyPath: (String(dreamSelectMsg)))
        //: fade.beginTime = CACurrentMediaTime() + animationDuration * 0.60
        fade.beginTime = CACurrentMediaTime() + animationDuration * 0.60
        //: fade.duration = 0.1
        fade.duration = 0.1
        //: fade.toValue = 0
        fade.toValue = 0
        //: fade.timingFunction = CAMediaTimingFunction(name: CAMediaTimingFunctionName.easeOut)
        fade.timingFunction = CAMediaTimingFunction(name: CAMediaTimingFunctionName.easeOut)
        //: fade.fillMode = CAMediaTimingFillMode.forwards
        fade.fillMode = CAMediaTimingFillMode.forwards
        //: fade.isRemovedOnCompletion = false
        fade.isRemovedOnCompletion = false
        //: rippleLayer.add(fade, forKey: nil)
        rippleLayer.add(fade, forKey: nil)

        // change path
        //: CATransaction.begin()
        CATransaction.begin()
        //: let maskLayerAnimation = CABasicAnimation(keyPath: "path")
        let maskLayerAnimation = CABasicAnimation(keyPath: (app_numberKey.replacingOccurrences(of: "list", with: "at")))
        //: maskLayerAnimation.fromValue = circleMaskPathInitial.cgPath
        maskLayerAnimation.fromValue = circleMaskPathInitial.cgPath
        //: maskLayerAnimation.toValue = circleMaskPathFinal.cgPath
        maskLayerAnimation.toValue = circleMaskPathFinal.cgPath
        //: maskLayerAnimation.beginTime = CACurrentMediaTime()
        maskLayerAnimation.beginTime = CACurrentMediaTime()
        //: maskLayerAnimation.duration = 0.1
        maskLayerAnimation.duration = 0.1
        //: maskLayerAnimation.timingFunction = CAMediaTimingFunction(name: CAMediaTimingFunctionName.easeOut)
        maskLayerAnimation.timingFunction = CAMediaTimingFunction(name: CAMediaTimingFunctionName.easeOut)
        //: CATransaction.setCompletionBlock({
        CATransaction.setCompletionBlock {
            //: coverView.removeFromSuperview()
            coverView.removeFromSuperview()
            //: })
        }
        //: rippleLayer.add(maskLayerAnimation, forKey: "path")
        rippleLayer.add(maskLayerAnimation, forKey: (app_numberKey.replacingOccurrences(of: "list", with: "at")))
        //: CATransaction.commit()
        CATransaction.commit()
    }
}

// MARK: - Public Event

//: extension TalkingChatListTableCell {
extension TextCellView {
    /// Âà∑Êñ∞cell
    /// - Parameter model: Ê®°Âûã
    //: func refreshCell(model: TalkingConversationModel?) {
    func liveAndMicrochip(model: ReadConversationModel?) {
        //: guard let model = model else { return }
        guard let model = model else { return }
        //: let isOther = (model.chatType == .system || model.chatType == .service ||
        let isOther = (model.chatType == .system || model.chatType == .service ||
            //: model.chatType == .group || model.chatType == .moreMsg)
            model.chatType == .group || model.chatType == .moreMsg)
        // Êõ¥Êñ∞ÊòµÁß∞„ÄÅÂ§¥ÂÉè„ÄÅvipÊ†áËØÜ
        //: updateUserInfo(userInfo: model.gj_userInfo, model: model, isOther: isOther)
        clickFlush(userInfo: model.gj_userInfo, model: model, isOther: isOther)
        // Êú™ËØªÊ∂àÊÅØÊï∞
        //: updateUnreadNumber(unreadCount: Int(model.unreadCount))
        fortify(unreadCount: Int(model.unreadCount))
        // ËØ¶ÊÉÖÊ∂àÊÅØ
        //: handleC2CMessage(model: model)
        sizeModel(model: model)

        //: if model.chatType == .group || model.chatType == .moreMsg {
        if model.chatType == .group || model.chatType == .moreMsg {
            //: self.accessoryType = .disclosureIndicator
            self.accessoryType = .disclosureIndicator // Ê∑ªÂä†ÁÆ≠Â§¥
            //: } else {
        } else {
            //: self.accessoryType = .none
            self.accessoryType = .none
        }
        // Êó∂Èó¥
        //: timeLab.text = nil
        timeLab.text = nil
        //: if isOther == false && model.hasTimestamp {
        if isOther == false, model.hasTimestamp {
            //: let timestamp: Date? = model.timestamp as Date?
            let timestamp: Date? = model.timestamp as Date?
            //: if timestamp != nil && timestamp!.timeIntervalSince1970 > NSTimeIntervalSince1970 {
            if timestamp != nil, timestamp!.timeIntervalSince1970 > NSTimeIntervalSince1970 {
                //: timeLab.text = NSDate.tx_messageTimeString(showDetail: false, date: timestamp!)
                timeLab.text = NSDate.noneBegin(showDetail: false, date: timestamp!)
            }
        }
        // ÁΩÆÈ°∂ËÉåÊôØËâ≤
        //: if model.isPinned == true {
        if model.isPinned == true {
            //: contentView.backgroundColor = UIColor(hex: "#EEEEEE")
            contentView.backgroundColor = UIColor(hex: (String(user_loadUrl.suffix(7))))
            //: } else {
        } else {
            //: contentView.backgroundColor = (ModeStageReactiveCompatible.share.appStatus == AppSkinStatus.special.rawValue) ? .clear:.white
            contentView.backgroundColor = (ModeStageReactiveCompatible.share.appStatus == OfSum.special.rawValue) ? .clear : .white
        }
        //: self.backgroundColor = contentView.backgroundColor
        self.backgroundColor = contentView.backgroundColor
    }

    /// Â§ÑÁêÜÊúÄÊñ∞Ê∂àÊÅØ
    //: static func handleShowC2CDetailTextOfMessage(model: TalkingConversationModel) -> NSMutableAttributedString? {
    static func handleIndexStiffening(model: ReadConversationModel) -> NSMutableAttributedString? {
//        messageType Ê∂àÊÅØÁ±ªÂûãÔºö1Á≥ªÁªüÊ∂àÊÅØ 2ÂÆòÊñπÂ∞èÁßò 3Ëá™Âä®ÊâìÊãõÂëº 4‰∏ªÂä®ÊâìÊãõÂëº 5‰ªòË¥πÊ∂àÊÅØ 6ÊôÆÈÄöÊ∂àÊÅØ 7‰∏ªÂä®ÊâìÊãõÂëºÊú™ÂõûÂ§ç 8.‰∏ªÊâìÊãõÂëºÂõûÂ§ç 9ÔºåËá™Âä®ÊâìÊãõÂëºÊú™ÂõûÂ§ç 10, Ëá™Âä®ÊâìÊãõÂëºÂõûÂ§ç11.ÂèëÈÄÅÁ§ºÁâ©Ê∂àÊÅØ 12‰∫íÁõ∏ÂÖ≥Ê≥®Ê∂àÊÅØ 13 ÂèñÊ∂àÂÖ≥Ê≥® 22ÂÆ∂ÊóèÈÇÄËØ∑Ë∑≥ËΩ¨Ê∂àÊÅØ 25Á¥¢Ë¶ÅÁ§ºÁâ©
        //: var detailAttrString: NSMutableAttributedString?
        var detailAttrString: NSMutableAttributedString?
        //: let change = false
        let change = false
        //: var speColor = [NSValue: UIColor]()
        var speColor = [NSValue: UIColor]()
        //: let showUnread = model.isShowMsgUnread && model.unreadCount > 0
        let showUnread = model.isShowMsgUnread && model.unreadCount > 0
        //: let direction: TMsgDirection = (model.listShowMessage?.isSelf ?? false) ? .MsgDirectionOutgoing:.MsgDirectionIncoming
        let direction: PratfallTermConvertible = (model.listShowMessage?.isSelf ?? false) ? .MsgDirectionOutgoing : .MsgDirectionIncoming
        //: var voice_msgInfo: JSON?
        var voice_msgInfo: JSON?

        //: guard model.draftText.isEmptyString else {
        guard model.draftText.isEmptyString else { // ËçâÁ®ø
            //: detailAttrString = self.getDraftString(draft: &model.draftText)
            detailAttrString = self.dipSumo(draft: &model.draftText)
            //: detailAttrString?.addAttribute(.font, value: UIFont.pingfangFont(type: .Regular, fontSize: 15), range: NSRange(location: 0, length: detailAttrString?.length ?? 0))
            detailAttrString?.addAttribute(.font, value: UIFont.fontFile(type: .Regular, fontSize: 15), range: NSRange(location: 0, length: detailAttrString?.length ?? 0))
            //: return detailAttrString
            return detailAttrString
        }

        //: let extra = String(data: (model.listShowMessage?.customElem.data)!, encoding: .utf8)
        let extra = String(data: (model.listShowMessage?.customElem.data)!, encoding: .utf8)
        //: let json = JSON(parseJSON: extra!)
        let json = JSON(parseJSON: extra!)
        //: let extraDic = json["extra"]
        let extraDic = json[(String(app_withId))]
        //: let msgInfo = extraDic["msgInfo"]
        let msgInfo = extraDic[(String(kKeyRowMessage))]
        //: var content = msgInfo["content"].stringValue.deleteHtmlTips()
        var content = msgInfo[(String(mPathPicMessage))].stringValue.kindMake()
        //: let messageType = msgInfo["messageType"].intValue
        let messageType = msgInfo[(mFeeStr.replacingOccurrences(of: "array", with: "a") + "geType")].intValue
        //: let formatTypeStr = extraDic["formatType"].stringValue
        let formatTypeStr = extraDic[(showEqualMsg.replacingOccurrences(of: "input", with: "f") + String(noti_mainIdent))].stringValue

        //: if TalkingPrivateChatManager.isReplyToGetPointsMsg(direction, messageType, msgTime: model.listShowMessage?.timestamp) {
        if ErrorReactiveCompatible.colorSub(direction, messageType, msgTime: model.listShowMessage?.timestamp) { // ÂõûÂ§çËé∑ÂèñÁßØÂàÜÊ∂àÊÅØ
            //: let content = "[Reply messages to get points]".localized
            let content = (String(notiClearSharedText.suffix(6)) + " messages" + String(appViewNeedTrueMsg)).localized
            //: let color  = UIColor.appValueColor()
            let color = UIColor.eraseColor()
            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)
            //: speColor = [NSValue(range: NSRange(location: 0, length: detailAttrString?.length ?? 0)): color]
            speColor = [NSValue(range: NSRange(location: 0, length: detailAttrString?.length ?? 0)): color]

            //: } else if model.chatType == .system {
        } else if model.chatType == .system { // ÂÆòÊñπÊ∂àÊÅØÔºåÂè™Â±ïÁ§∫ÊñáÊú¨
            //: var content = extraDic["title"].stringValue
            var content = extraDic[(notiIndicatorFormat.replacingOccurrences(of: "device", with: "t"))].stringValue
            //: let sysContent = extraDic["content"].stringValue
            let sysContent = extraDic[(String(mPathPicMessage))].stringValue
            //: let sysImg = extraDic["img"].stringValue
            let sysImg = extraDic[(notiMakeOfKey.replacingOccurrences(of: "may", with: "i"))].stringValue
            //: if content.count > 0 || sysContent.count > 0 || sysImg.count > 0 {
            if content.count > 0 || sysContent.count > 0 || sysImg.count > 0 { // Ë∑≥ËΩ¨Á≥ªÁªüÊ∂àÊÅØ
                //: if content.count == 0 {
                if content.count == 0 {
                    //: content.append(sysContent)
                    content.append(sysContent)
                }
                //: if sysImg.count > 0 {
                if sysImg.count > 0 {
                    //: content.append("[Photo]".localized)
                    content.append((String(dream_labFormat) + m_rowUrl.replacingOccurrences(of: "regular", with: "]")).localized)
                }

                //: } else {
            } else { // ÈªòËÆ§Á≥ªÁªüÊ∂àÊÅØ
                //: content = msgInfo["content"].stringValue
                content = msgInfo[(String(mPathPicMessage))].stringValue
                //: if content.isEmptyString {
                if content.isEmptyString {
                    //: content = json["content"].stringValue
                    content = json[(String(mPathPicMessage))].stringValue
                }
                //: content = content.deleteHtmlTips()
                content = content.kindMake()
            }
            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if DistrictManagerOfReactiveCompatible.checkVoiceJsonMsg(msginfo: msgInfo.dictionaryValue) {
        } else if DistrictManagerOfReactiveCompatible.acquisition(msginfo: msgInfo.dictionaryValue) { // ËØ≠Èü≥
            //: voice_msgInfo = msgInfo
            voice_msgInfo = msgInfo
            //: content = "[Audio]".localized
            content = (String(app_onStr.prefix(7))).localized
            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if json["rYMsgType"].stringValue == "GJ:CallCustom" { // Èü≥ËßÜÈ¢ëÈÄöËØù
        } else if json[(String(m_dataText))].stringValue == (String(k_componentUrl.suffix(5)) + "llCu" + dream_requestMaxMomentPath.replacingOccurrences(of: "message", with: "m")) { // Èü≥ËßÜÈ¢ëÈÄöËØù
            //: if msgInfo["callCmd"].stringValue == "missCall" { // Êú™Êé•Êù•Áîµ
            if msgInfo[(String(k_itemFormat) + String(show_dataValue))].stringValue == (String(userIndexFormat.suffix(8))) { // Êú™Êé•Êù•Áîµ
                //: content = "[Missed Call]".localized
                content = (String(main_makeContent.prefix(5)) + "ed Call]").localized
                //: } else {
            } else {
                //: if msgInfo["logType"].intValue == 1 { // Èü≥È¢ë
                if msgInfo[(String(mainCenterEffectData.suffix(7)))].intValue == 1 { // Èü≥È¢ë
                    //: content = "[Voice Call]".localized
                    content = (String(user_requestFormat) + String(mainSizeKey.prefix(6))).localized
                    //: } else {
                } else {
                    //: content = "[Video Call]".localized
                    content = (String(user_colorValue)).localized
                }
            }

            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if msgInfo["video"].exists() || msgInfo["contentType"].stringValue == "VideoMsg" { // Áü≠ËßÜÈ¢ë
        } else if msgInfo[(kMakeActualEqualData.replacingOccurrences(of: "name", with: "id"))].exists() || msgInfo[(k_tabData.lowercased() + String(notiVoiceKey.suffix(7)))].stringValue == (String(show_sizeUrl)) { // Áü≠ËßÜÈ¢ë
            //: content = "[Short Video]".localized
            content = (String(showReadValue.suffix(4)) + "rt V" + String(kPerspectiveText)).localized
            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if (extraDic["match"].stringValue == "1" || msgInfo["match"].stringValue == "1") { // ÂåπÈÖçÊ∂àÊÅØ
        } else if extraDic[(appTextValue.replacingOccurrences(of: "with", with: "a"))].stringValue == "1" || msgInfo[(appTextValue.replacingOccurrences(of: "with", with: "a"))].stringValue == "1" { // ÂåπÈÖçÊ∂àÊÅØ
            //: content = "[Cupid messaging]".localized
            content = (String(noti_viewSenseName.suffix(5)) + "d mess" + String(dream_kitPlayerValue.suffix(6))).localized
            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if json["rYMsgType"].stringValue == "GJ:Sess:TxtCustom" { // ÊèêÁ§∫Ê∂àÊÅØ
        } else if json[(String(m_dataText))].stringValue == (String(user_curValue.prefix(5)) + "ss:T" + String(dreamCountMsg.suffix(8))) { // ÊèêÁ§∫Ê∂àÊÅØ
            //: content = json["content"].stringValue
            content = json[(String(mPathPicMessage))].stringValue
            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if messageType == 11 {
        } else if messageType == 11 { // ÈÄÅÁ§º
            //: let isSend = msgInfo["isSend"].string
            let isSend = msgInfo[(String(mMoveMessage) + String(app_showUrl.suffix(5)))].string
            //: var string1: String?
            var string1: String?
            //: if isSend != nil {
            if isSend != nil {
                //: string1 = isSend!.boolValue ? "Sent Gift".localized:"Receive Gift".localized
                string1 = isSend!.boolValue ? (String(kCurId) + String(userEmptyName.suffix(7))).localized : (String(appColorText.prefix(5)) + k_errorText.replacingOccurrences(of: "pair", with: "ve") + String(mValueId)).localized
                //: } else {
            } else {
                //: let uid = msgInfo["uid"].stringValue
                let uid = msgInfo[(String(main_priorityText))].stringValue
                //: string1 = (uid == ModeStageReactiveCompatible.share.loginUserMode.userID) ? "Sent Gift".localized:"Receive Gift".localized
                string1 = (uid == ModeStageReactiveCompatible.share.loginUserMode.userID) ? (String(kCurId) + String(userEmptyName.suffix(7))).localized : (String(appColorText.prefix(5)) + k_errorText.replacingOccurrences(of: "pair", with: "ve") + String(mValueId)).localized
            }
            //: let name = extraDic["gift"]["name"].stringValue
            let name = extraDic[(String(dream_labWillName))][(String(userResultValue))].stringValue
            //: let num = extraDic["gift"]["num"].stringValue
            let num = extraDic[(String(dream_labWillName))][(String(dream_activeUrl))].stringValue

            //: content = "\(string1!) \(name) x\(num)"
            content = "\(string1!) \(name) x\(num)"
            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if messageType == 4 {
        } else if messageType == 4 { // ‰∏ªÂä®ÊâìÊãõÂëº
//            let uid = msgInfo["uid"].stringValue
//            let toUid = msgInfo["toUid"].stringValue
            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if messageType == 3 {
        } else if messageType == 3 { // Ëá™Âä®ÊâìÊãõÂëº
            //: let imageUri = msgInfo["imageUri"].stringValue
            let imageUri = msgInfo[(String(dream_allPath) + dreamMediumKey.replacingOccurrences(of: "tab", with: "i"))].stringValue
            //: let imageData = msgInfo["imageData"].stringValue
            let imageData = msgInfo[(dreamUserShareMsg.replacingOccurrences(of: "play", with: "e") + String(appColorAddUrl.prefix(4)))].stringValue

            //: if DistrictManagerOfReactiveCompatible.checkVoiceJsonMsg(msginfo: msgInfo.dictionaryValue) {
            if DistrictManagerOfReactiveCompatible.acquisition(msginfo: msgInfo.dictionaryValue) {
                //: content = "[Audio]".localized
                content = (String(app_onStr.prefix(7))).localized
                //: } else if (imageUri.count > 0 || imageData.count > 0) {
            } else if imageUri.count > 0 || imageData.count > 0 {
                //: content = "[Photo]".localized
                content = (String(dream_labFormat) + m_rowUrl.replacingOccurrences(of: "regular", with: "]")).localized
            }
            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if formatTypeStr == RCSystemFormatTypePlain {
        } else if formatTypeStr == kNoValue {
            //: var content  = msgInfo["content"].stringValue
            var content = msgInfo[(String(mPathPicMessage))].stringValue
            //: var imageUrl = extraDic["imageUri"].stringValue
            var imageUrl = extraDic[(String(dream_allPath) + dreamMediumKey.replacingOccurrences(of: "tab", with: "i"))].stringValue
            //: let imageData = extraDic["imageData"].stringValue
            let imageData = extraDic[(dreamUserShareMsg.replacingOccurrences(of: "play", with: "e") + String(appColorAddUrl.prefix(4)))].stringValue
            //: if imageUrl.count == 0 || imageData.count > 0 {
            if imageUrl.count == 0 || imageData.count > 0 {
                //: if content.hasPrefix("<img>") && content.hasSuffix("</img>") {
                if content.hasPrefix((String(k_styleKey.suffix(5)))), content.hasSuffix((String(showReceiveMsg.prefix(6)))) {
                    //: var str = NSString(string: content)
                    var str = NSString(string: content)
                    //: str = str.replacingOccurrences(of: "<img>", with: "") as NSString
                    str = str.replacingOccurrences(of: (String(k_styleKey.suffix(5))), with: "") as NSString
                    //: str = str.replacingOccurrences(of: "</img>", with: "") as NSString
                    str = str.replacingOccurrences(of: (String(showReceiveMsg.prefix(6))), with: "") as NSString
                    //: imageUrl = str as String
                    imageUrl = str as String
                }
            }

            //: if (imageUrl.count > 0 || imageData.count > 0) {
            if imageUrl.count > 0 || imageData.count > 0 {
                //: content = "[Photo]".localized
                content = (String(dream_labFormat) + m_rowUrl.replacingOccurrences(of: "regular", with: "]")).localized
                //: } else {
            } else {
                //: content = content.deleteHtmlTips()
                content = content.kindMake()
            }

            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)

            //: } else if messageType == 25 {
        } else if messageType == 25 { // Á¥¢Ë¶ÅÁ§ºÁâ©
            //: if let wantGift  = msgInfo["wantGift"].dictionary {
            if let wantGift = msgInfo[(String(dream_viewText.prefix(7)) + m_countInviteText.replacingOccurrences(of: "equal", with: "t"))].dictionary {
                //: let content = wantGift["content"]?.string ?? ""
                let content = wantGift[(String(mPathPicMessage))]?.string ?? ""
                //: detailAttrString = NSMutableAttributedString(string: content)
                detailAttrString = NSMutableAttributedString(string: content)
            }

            //: } else {
        } else {
            // ÂõæÁâá

            //: let imageUri             = msgInfo["imageUri"].stringValue
            let imageUri = msgInfo[(String(dream_allPath) + dreamMediumKey.replacingOccurrences(of: "tab", with: "i"))].stringValue
            //: let imageData            = msgInfo["imageData"].stringValue
            let imageData = msgInfo[(dreamUserShareMsg.replacingOccurrences(of: "play", with: "e") + String(appColorAddUrl.prefix(4)))].stringValue
            //: let intimatePhotoDict    = msgInfo["intimatePhoto"].dictionaryValue // ÁßÅÂØÜÁÖßÁâá
            let intimatePhotoDict = msgInfo[(String(appValueKey) + kReportValue.replacingOccurrences(of: "time", with: "o"))].dictionaryValue // ÁßÅÂØÜÁÖßÁâá
            //: if (imageUri.count > 0 || imageData.count > 0 || intimatePhotoDict.keys.count > 0) {
            if imageUri.count > 0 || imageData.count > 0 || intimatePhotoDict.keys.count > 0 {
                //: content = "[Photo]".localized
                content = (String(dream_labFormat) + m_rowUrl.replacingOccurrences(of: "regular", with: "]")).localized
            }
            // ËØ≠Èü≥Ê∂àÊÅØ
            //: if DistrictManagerOfReactiveCompatible.checkVoiceJsonMsg(msginfo: msgInfo.dictionaryValue) {
            if DistrictManagerOfReactiveCompatible.acquisition(msginfo: msgInfo.dictionaryValue) {
                //: content = "[Audio]".localized
                content = (String(app_onStr.prefix(7))).localized
            }

            //: detailAttrString = NSMutableAttributedString(string: content)
            detailAttrString = NSMutableAttributedString(string: content)
        }

        //: if (!change) {
        if !change {
            //: if detailAttrString?.string == "[Audio]".localized {
            if detailAttrString?.string == (String(app_onStr.prefix(7))).localized {
                //: let sendUid = model.sender
                let sendUid = model.sender
                //: let mid = ModeStageReactiveCompatible.share.loginUserMode.userID
                let mid = ModeStageReactiveCompatible.share.loginUserMode.userID
                //: if sendUid == mid {
                if sendUid == mid { // ÊàëÂèëÈÄÅÁöÑ
                    //: } else {
                } else { // Âà´‰∫∫ÂèëÁöÑ
                    //: var downurl = ""
                    var downurl = ""
                    //: if (voice_msgInfo?["audioData"].stringValue.isEmptyString) != nil {
                    if (voice_msgInfo?[(k_backgroundStr.replacingOccurrences(of: "status", with: "i") + "oDat" + dreamSizeIdent.replacingOccurrences(of: "color", with: "a"))].stringValue.isEmptyString) != nil {
                        //: downurl = voice_msgInfo!["audioData"].stringValue
                        downurl = voice_msgInfo![(k_backgroundStr.replacingOccurrences(of: "status", with: "i") + "oDat" + dreamSizeIdent.replacingOccurrences(of: "color", with: "a"))].stringValue
                        //: } else if (voice_msgInfo?["audioUri"].stringValue.isEmptyString) != nil {
                    } else if (voice_msgInfo?[(mainTempKey.replacingOccurrences(of: "key", with: "d") + "oUri")].stringValue.isEmptyString) != nil {
                        //: downurl = voice_msgInfo!["audioUri"].stringValue
                        downurl = voice_msgInfo![(mainTempKey.replacingOccurrences(of: "key", with: "d") + "oUri")].stringValue
                    }
                }
                //: let unreadColor = UIColor.appValueDetailColor()
                let unreadColor = UIColor.totalervertebralDisc()
                //: detailAttrString?.addAttribute(.foregroundColor, value: unreadColor, range: NSRange(location: 0, length: detailAttrString?.length ?? 0))
                detailAttrString?.addAttribute(.foregroundColor, value: unreadColor, range: NSRange(location: 0, length: detailAttrString?.length ?? 0))

                //: } else {
            } else {
                //: let unreadColor = UIColor.appValueDetailColor()
                let unreadColor = UIColor.totalervertebralDisc()
                //: detailAttrString?.addAttribute(.foregroundColor, value: unreadColor, range: NSRange(location: 0, length: detailAttrString?.length ?? 0))
                detailAttrString?.addAttribute(.foregroundColor, value: unreadColor, range: NSRange(location: 0, length: detailAttrString?.length ?? 0))
            }
        }
        //: if speColor.keys.count > 0 {
        if speColor.keys.count > 0 {
            //: for (key, value) in speColor {
            for (key, value) in speColor {
                //: detailAttrString?.addAttribute(.foregroundColor, value: value, range: key.rangeValue)
                detailAttrString?.addAttribute(.foregroundColor, value: value, range: key.rangeValue)
            }
        }
        //: detailAttrString?.addAttribute(.font, value: UIFont.pingfangFont(type: .Regular, fontSize: 15), range: NSRange(location: 0, length: detailAttrString?.length ?? 0))
        detailAttrString?.addAttribute(.font, value: UIFont.fontFile(type: .Regular, fontSize: 15), range: NSRange(location: 0, length: detailAttrString?.length ?? 0))

        //: return detailAttrString
        return detailAttrString
    }

    /// Â§ÑÁêÜËçâÁ®øÊ∂àÊÅØ
    //: static func getDraftString(draft: inout String) -> NSMutableAttributedString {
    static func dipSumo(draft: inout String) -> NSMutableAttributedString {
        //: if draft.contains("draftContent") {
        if draft.contains((String(user_textTitle.prefix(6)) + "onten" + k_layerEffectFormat.lowercased())) {
            //: let dict = NSDictionary.dictionary(withJsonString: draft)
            let dict = NSDictionary.styleObject(withJsonString: draft)
            //: draft = "\(String(describing: dict?["draftContent"]))"
            draft = "\(String(describing: dict?[(String(user_textTitle.prefix(6)) + "onten" + k_layerEffectFormat.lowercased())]))"
        }
        //: let draftString = NSMutableAttributedString.init(string: "[draft]%@".localizedArguments(draft))
        let draftString = NSMutableAttributedString(string: (String(noti_hiddenFormat.suffix(6)) + String(show_noPushValue)).localizedDataArguments(draft))
        //: draftString.addAttribute(.foregroundColor, value: UIColor.msgTipsColor(), range: NSRange(location: 0, length: 7))
        draftString.addAttribute(.foregroundColor, value: UIColor.tableTag(), range: NSRange(location: 0, length: 7))
        //: return draftString
        return draftString
    }
}

// MARK: - Private Event

//: extension TalkingChatListTableCell {
extension TextCellView {
    /// Êõ¥Êñ∞ÊòµÁß∞„ÄÅÂ§¥ÂÉè
    /// - Parameters:
    ///   - userInfo: Êï∞ÊçÆÂ∫ì‰ø°ÊÅØ
    ///   - model: txÊï∞ÊçÆ
    ///   - isOther: ÊòØÂê¶ÂÖ∂‰ªñÊ∂àÊÅØ
    //: private func updateUserInfo(userInfo: ViewHandyJSON?, model: TalkingConversationModel, isOther: Bool) {
    private func clickFlush(userInfo: ViewHandyJSON?, model: ReadConversationModel, isOther: Bool) {
        // Âú®Á∫øÁä∂ÊÄÅ
        //: onlineStatus.isHidden = (model.listOnlineStatus == 0)
        onlineStatus.isHidden = (model.listOnlineStatus == 0)
        //: newImgV.isHidden = !model.isNewUser
        newImgV.isHidden = !model.isNewUser
        // ÊòØÂê¶Â≠òÂú®Áî®Êà∑‰ø°ÊÅØ
        //: if userInfo == nil || userInfo?.uid == MacroReactiveCompatible.getXiaoMiID() || userInfo?.uid == MacroReactiveCompatible.getCustomerServiceID() {
        if userInfo == nil || userInfo?.uid == MacroReactiveCompatible.preemptSystemXiao() || userInfo?.uid == MacroReactiveCompatible.picLine() {
            //: nickNameLabel.textColor = .appTitleColor()
            nickNameLabel.textColor = .startMake()
            //: nickNameLabel.text = model.showName
            nickNameLabel.text = model.showName
            //: nickNameLabel.snp.updateConstraints { make in
            nickNameLabel.snp.updateConstraints { make in
                //: make.trailing.lessThanOrEqualToSuperview().offset(-40)
                make.trailing.lessThanOrEqualToSuperview().offset(-40)
            }
            //: if model.chatType == .group || model.chatType == .moreMsg {
            if model.chatType == .group || model.chatType == .moreMsg {
                //: headImgView.image = UIImage.BundleImageNamed(name: model.faceUrl)
                headImgView.image = UIImage.namedImageNameBundle(name: model.faceUrl)
                //: } else {
            } else {
                //: headImgView.setUrlImage(urlStr: model.faceUrl, placeImg: UIImage.placeSquareBigImgBanner())
                headImgView.giveAndTake(urlStr: model.faceUrl, placeImg: UIImage.aboveSend())
            }
            //: iconBorder.isHidden = true
            iconBorder.isHidden = true
            //: loungeImgV.isHidden = true
            loungeImgV.isHidden = true
            //: authImgV.isHidden = true
            authImgV.isHidden = true
            //: officialImgV.isHidden = true
            officialImgV.isHidden = true
            //: imtimateBtn.isHidden = true
            imtimateBtn.isHidden = true
            //: return
            return
        }
        //: guard let userInfo = userInfo else {
        guard let userInfo = userInfo else {
            //: return
            return
        }
        // ÊòµÁß∞
        //: nickNameLabel.textColor = userInfo.loungePlus ? .userVipColor():.appTitleColor()
        nickNameLabel.textColor = userInfo.loungePlus ? .career() : .startMake()
        //: nickNameLabel.text = userInfo.nickname.count > 0 ? userInfo.nickname:model.userID
        nickNameLabel.text = userInfo.nickname.count > 0 ? userInfo.nickname : model.userID
        // Â§¥ÂÉè
        //: headImgView.setUrlImage(urlStr: userInfo.headPic, placeImg: UIImage.placeHolderImage(sex: userInfo.sex))
        headImgView.giveAndTake(urlStr: userInfo.headPic, placeImg: UIImage.towardZarf(sex: userInfo.sex))
        // VIPÂ§¥ÂÉèÊ°Ü
        //: if isOther == false && !userInfo.headPicFrame.isEmptyString {
        if isOther == false, !userInfo.headPicFrame.isEmptyString {
            //: iconBorder.isHidden = false
            iconBorder.isHidden = false
            //: iconBorder.setHeadFrameUrlImage(urlStr: userInfo.headPicFrame)
            iconBorder.faceTable(urlStr: userInfo.headPicFrame)
            //: } else {
        } else {
            //: iconBorder.isHidden = true
            iconBorder.isHidden = true
        }
        //: imtimateBtn.setTitle(model.totalIntimate > 99999 ? "99999+": "\(model.totalIntimate)", for: .normal)
        imtimateBtn.setTitle(model.totalIntimate > 99999 ? String(bytes: dream_layerMsg.map{startLog(app: $0)}, encoding: .utf8)! : "\(model.totalIntimate)", for: .normal)
        //: imtimateBtn.isHidden = model.totalIntimate <= 0
        imtimateBtn.isHidden = model.totalIntimate <= 0
        //: if model.totalIntimate > 0 {
        if model.totalIntimate > 0 {
            //: let size = imtimateBtn.titleLabel?.text?.boundingRect(with: CGSize(width: CGFloat(MAXFLOAT), height: 0.0), options: .usesLineFragmentOrigin, attributes: [NSAttributedString.Key.font: imtimateBtn.titleLabel?.font ?? .pingfangFont(type: .Medium, fontSize: 12)], context: nil)
            let size = imtimateBtn.titleLabel?.text?.boundingRect(with: CGSize(width: CGFloat(MAXFLOAT), height: 0.0), options: .usesLineFragmentOrigin, attributes: [NSAttributedString.Key.font: imtimateBtn.titleLabel?.font ?? .fontFile(type: .Medium, fontSize: 12)], context: nil)
            //: imtimateBtn.snp.updateConstraints { make in
            imtimateBtn.snp.updateConstraints { make in
                //: make.width.equalTo((size?.width ?? 50) + 20)
                make.width.equalTo((size?.width ?? 50) + 20)
            }
        }
        // ÊòØÂê¶ÂÖ∂‰ªñÊ∂àÊÅØ
        //: if isOther == false {
        if isOther == false {
            //: loungeImgV.isHidden = !userInfo.loungePlus
            loungeImgV.isHidden = !userInfo.loungePlus
            //: authImgV.isHidden = !userInfo.tpAuth
            authImgV.isHidden = !userInfo.tpAuth
            //: officialImgV.isHidden = !userInfo.isOfficial
            officialImgV.isHidden = !userInfo.isOfficial
            //: } else {
        } else {
            //: loungeImgV.isHidden = true
            loungeImgV.isHidden = true
            //: authImgV.isHidden = true
            authImgV.isHidden = true
            //: officialImgV.isHidden = true
            officialImgV.isHidden = true
        }

        //: nickNameLabel.snp.updateConstraints { make in
        nickNameLabel.snp.updateConstraints { make in
            //: make.trailing.lessThanOrEqualToSuperview().offset( isOther == true ? -40 : -130)
            make.trailing.lessThanOrEqualToSuperview().offset(isOther == true ? -40 : -130)
        }
        //: loungeImgV.snp.updateConstraints { make in
        loungeImgV.snp.updateConstraints { make in
            //: make.leading.equalTo(nickNameLabel.snp.trailing).offset(loungeImgV.isHidden == true ? 0:4)
            make.leading.equalTo(nickNameLabel.snp.trailing).offset(loungeImgV.isHidden == true ? 0 : 4)
            //: make.width.equalTo(loungeImgV.isHidden == true ? 0:20)
            make.width.equalTo(loungeImgV.isHidden == true ? 0 : 20)
        }
        //: authImgV.snp.updateConstraints { make in
        authImgV.snp.updateConstraints { make in
            //: make.leading.equalTo(loungeImgV.snp.trailing).offset(authImgV.isHidden == true ? 0:4)
            make.leading.equalTo(loungeImgV.snp.trailing).offset(authImgV.isHidden == true ? 0 : 4)
            //: make.width.equalTo(authImgV.isHidden == true ? 0:16)
            make.width.equalTo(authImgV.isHidden == true ? 0 : 16)
        }
        //: let text = "New".localized
        let text = (String(noti_quitMessage)).localized
        //: let rect = text.boundingRect(with: .zero, options: .usesLineFragmentOrigin, attributes: [.font: UIFont.pingfangMediumFont(fontSize: 11)], context: nil)
        let rect = text.boundingRect(with: .zero, options: .usesLineFragmentOrigin, attributes: [.font: UIFont.dismissProgress(fontSize: 11)], context: nil)
        //: newImgV.snp.updateConstraints { make in
        newImgV.snp.updateConstraints { make in
            //: make.leading.equalTo(authImgV.snp.trailing).offset(newImgV.isHidden == true ? 0:4)
            make.leading.equalTo(authImgV.snp.trailing).offset(newImgV.isHidden == true ? 0 : 4)
            //: make.width.equalTo(newImgV.isHidden == true ? 0:rect.width+10)
            make.width.equalTo(newImgV.isHidden == true ? 0 : rect.width + 10)
        }
        //: officialImgV.snp.remakeConstraints { make in
        officialImgV.snp.remakeConstraints { make in
            //: make.centerY.equalTo(nickNameLabel)
            make.centerY.equalTo(nickNameLabel)
            //: make.height.equalTo(15)
            make.height.equalTo(15)
            //: make.leading.equalTo(newImgV.snp.trailing).offset(officialImgV.isHidden == true ? 0:4)
            make.leading.equalTo(newImgV.snp.trailing).offset(officialImgV.isHidden == true ? 0 : 4)
            //: if officialImgV.isHidden {
            if officialImgV.isHidden {
                //: make.width.equalTo(0)
                make.width.equalTo(0)
                //: } else {
            } else {
                //: make.width.greaterThanOrEqualTo(50)
                make.width.greaterThanOrEqualTo(50)
            }
        }
    }

    /// Êõ¥Êñ∞Êú™ËØªÊï∞
    /// - Parameter unreadCount: Êú™ËØªÊ∂àÊÅØÊï∞
    //: private func updateUnreadNumber(unreadCount: Int) {
    private func fortify(unreadCount: Int) {
        //: guard unreadCount > 0 else {
        guard unreadCount > 0 else {
            //: self.badgeLab.isHidden = true
            self.badgeLab.isHidden = true
            //: return
            return
        }

        //: self.badgeLab.isHidden = false
        self.badgeLab.isHidden = false
        //: var unreadCountStr = String(unreadCount)
        var unreadCountStr = String(unreadCount)
        //: if unreadCount > 99 {
        if unreadCount > 99 {
            //: unreadCountStr = String(unreadCount) + "+"
            unreadCountStr = String(unreadCount) + "+"
            //: badgeLab.text = "99+"
            badgeLab.text = "99+"
            //: } else {
        } else {
            //: badgeLab.text = unreadCountStr
            badgeLab.text = unreadCountStr
        }
        //: var width = badgeLab.text!.size(withAttributes: [.font: self.badgeLab.font!]).width + 12
        var width = badgeLab.text!.size(withAttributes: [.font: self.badgeLab.font!]).width + 12
        //: if width < 20 { width = 20 }
        if width < 20 { width = 20 }
        //: badgeLab.snp.updateConstraints { make in
        badgeLab.snp.updateConstraints { make in
            //: make.width.greaterThanOrEqualTo(width)
            make.width.greaterThanOrEqualTo(width)
        }
    }

    /// Â§ÑÁêÜËØ¶ÊÉÖÊ∂àÊÅØ
    //: private func handleC2CMessage(model: TalkingConversationModel) {
    private func sizeModel(model: ReadConversationModel) {
        //: if model.userStatus == 5 {
        if model.userStatus == 5 {
            //: let str = "Account is restrictedÔºÅ".localized
            let str = (String(k_normalName.prefix(5)) + "nt is r" + noti_originContent.replacingOccurrences(of: "system", with: "r") + "ictedÔºÅ").localized
            //: let attributes: [NSAttributedString.Key: Any] = [
            let attributes: [NSAttributedString.Key: Any] = [
                //: NSAttributedString.Key.font: UIFont.pingfangFont(type: .Regular, fontSize: 15),
                NSAttributedString.Key.font: UIFont.fontFile(type: .Regular, fontSize: 15),
                //: NSAttributedString.Key.foregroundColor: UIColor.appValueDetailColor()
                NSAttributedString.Key.foregroundColor: UIColor.totalervertebralDisc(),
            ]
            //: msgShowLabel.attributedText = NSAttributedString(string: str, attributes: attributes)
            msgShowLabel.attributedText = NSAttributedString(string: str, attributes: attributes)
            //: return
            return
        }
        //: if model.listShowMessage != nil {
        if model.listShowMessage != nil {
            //: msgShowLabel.attributedText = TalkingChatListTableCell.handleShowC2CDetailTextOfMessage(model: model)
            msgShowLabel.attributedText = TextCellView.handleIndexStiffening(model: model)
            //: } else if model.chatType == .group {
        } else if model.chatType == .group { // ÂÖ¨ÂÖ±ËÅäÂ§©ÂÆ§ÂÖ•Âè£
            //: let str = "%@ Online".localizedArguments(model.num)
            let str = (String(userModelPath.prefix(4)) + user_cornerSuccessReturnValue.replacingOccurrences(of: "make", with: "n")).localizedDataArguments(model.num)
            //: let attributes: [NSAttributedString.Key: Any] = [
            let attributes: [NSAttributedString.Key: Any] = [
                //: NSAttributedString.Key.font: UIFont.pingfangFont(type: .Regular, fontSize: 15),
                NSAttributedString.Key.font: UIFont.fontFile(type: .Regular, fontSize: 15),
                //: NSAttributedString.Key.foregroundColor: UIColor.appValueDetailColor()
                NSAttributedString.Key.foregroundColor: UIColor.totalervertebralDisc(),
            ]
            //: msgShowLabel.attributedText = NSAttributedString(string: str, attributes: attributes)
            msgShowLabel.attributedText = NSAttributedString(string: str, attributes: attributes)

            //: } else if model.chatType == .moreMsg {
        } else if model.chatType == .moreMsg { // Êõ¥Â§öÊ∂àÊÅØÂÖ•Âè£ÔºåÊó†Êï∞ÊçÆÊó∂ÔºåÂç†‰ΩçÊñáÊ°à
            //: let str = "Messages not been replied here".localized
            let str = (String(notiActualManagerStr.suffix(9)) + String(app_phoneData.prefix(5)) + String(user_frameIndicatorFormat.suffix(6)) + "plied " + dream_makeId.replacingOccurrences(of: "to", with: "r")).localized
            //: let attributes: [NSAttributedString.Key: Any] = [
            let attributes: [NSAttributedString.Key: Any] = [
                //: NSAttributedString.Key.font: UIFont.pingfangFont(type: .Regular, fontSize: 15),
                NSAttributedString.Key.font: UIFont.fontFile(type: .Regular, fontSize: 15),
                //: NSAttributedString.Key.foregroundColor: UIColor.appValueDetailColor()
                NSAttributedString.Key.foregroundColor: UIColor.totalervertebralDisc(),
            ]
            //: msgShowLabel.attributedText = NSAttributedString(string: str, attributes: attributes)
            msgShowLabel.attributedText = NSAttributedString(string: str, attributes: attributes)

            //: } else {
        } else { // ËçâÁ®øÁÆ±
            //: var attrStr: NSMutableAttributedString?
            var attrStr: NSMutableAttributedString?
            //: if !model.draftText.isEmptyString {
            if !model.draftText.isEmptyString {
                //: attrStr = TalkingChatListTableCell.getDraftString(draft: &model.draftText)
                attrStr = TextCellView.dipSumo(draft: &model.draftText)
            }
            //: attrStr?.addAttribute(.font, value: UIFont.pingfangFont(type: .Regular, fontSize: 15), range: NSRange(location: 0, length: attrStr?.length ?? 0))
            attrStr?.addAttribute(.font, value: UIFont.fontFile(type: .Regular, fontSize: 15), range: NSRange(location: 0, length: attrStr?.length ?? 0))
            //: msgShowLabel.attributedText = attrStr
            msgShowLabel.attributedText = attrStr
        }
    }
}

// MARK: - UI

//: extension TalkingChatListTableCell {
extension TextCellView {
    //: private func createCellUI() {
    private func createUi() {
        //: contentView.addSubview(headImgView)
        contentView.addSubview(headImgView)
        //: contentView.addSubview(iconBorder)
        contentView.addSubview(iconBorder)
        //: contentView.addSubview(onlineStatus)
        contentView.addSubview(onlineStatus)
        //: contentView.addSubview(badgeLab)
        contentView.addSubview(badgeLab)
        //: contentView.addSubview(nickNameLabel)
        contentView.addSubview(nickNameLabel)
        //: contentView.addSubview(loungeImgV)
        contentView.addSubview(loungeImgV)
        //: contentView.addSubview(authImgV)
        contentView.addSubview(authImgV)
        //: contentView.addSubview(newImgV)
        contentView.addSubview(newImgV)
        //: contentView.addSubview(officialImgV)
        contentView.addSubview(officialImgV)
        //: contentView.addSubview(msgShowLabel)
        contentView.addSubview(msgShowLabel)
        //: contentView.addSubview(timeLab)
        contentView.addSubview(timeLab)
        //: contentView.addSubview(imtimateBtn)
        contentView.addSubview(imtimateBtn)
    }

    //: private func createCellUIConstraints() {
    private func nowadaysConstraints() {
        //: headImgView.snp.makeConstraints { make in
        headImgView.snp.makeConstraints { make in
            //: make.centerY.equalToSuperview()
            make.centerY.equalToSuperview()
            //: make.leading.equalTo(15)
            make.leading.equalTo(15)
            //: make.width.height.equalTo(60)
            make.width.height.equalTo(60)
        }
        //: iconBorder.snp.makeConstraints { make in
        iconBorder.snp.makeConstraints { make in
            //: make.centerY.equalToSuperview()
            make.centerY.equalToSuperview()
            //: make.leading.equalTo(10)
            make.leading.equalTo(10)
            //: make.width.height.equalTo(69.5)
            make.width.height.equalTo(69.5)
        }
        //: onlineStatus.snp.makeConstraints { make in
        onlineStatus.snp.makeConstraints { make in
            //: make.trailing.equalTo(headImgView.snp.trailing).offset(-3)
            make.trailing.equalTo(headImgView.snp.trailing).offset(-3)
            //: make.bottom.equalTo(headImgView.snp.bottom).offset(-3)
            make.bottom.equalTo(headImgView.snp.bottom).offset(-3)
            //: make.width.height.equalTo(10)
            make.width.height.equalTo(10)
        }
        //: badgeLab.snp.makeConstraints { make in
        badgeLab.snp.makeConstraints { make in
            //: make.top.equalTo(self.headImgView.snp.top).offset(-5)
            make.top.equalTo(self.headImgView.snp.top).offset(-5)
            //: make.trailing.equalTo(self.headImgView.snp.trailing).offset(6)
            make.trailing.equalTo(self.headImgView.snp.trailing).offset(6)
            //: make.height.equalTo(20)
            make.height.equalTo(20)
            //: make.width.greaterThanOrEqualTo(20)
            make.width.greaterThanOrEqualTo(20)
        }
        //: nickNameLabel.snp.makeConstraints { make in
        nickNameLabel.snp.makeConstraints { make in
            //: make.top.equalTo(headImgView).offset(6)
            make.top.equalTo(headImgView).offset(6)
            //: make.leading.equalTo(headImgView.snp.trailing).offset(10)
            make.leading.equalTo(headImgView.snp.trailing).offset(10)
            //: make.trailing.lessThanOrEqualToSuperview().offset(-40)
            make.trailing.lessThanOrEqualToSuperview().offset(-40)
            //: make.height.equalTo(21)
            make.height.equalTo(21)
        }
        //: loungeImgV.snp.makeConstraints { make in
        loungeImgV.snp.makeConstraints { make in
            //: make.centerY.equalTo(nickNameLabel)
            make.centerY.equalTo(nickNameLabel)
            //: make.leading.equalTo(nickNameLabel.snp.trailing).offset(4)
            make.leading.equalTo(nickNameLabel.snp.trailing).offset(4)
            //: make.height.width.equalTo(20)
            make.height.width.equalTo(20)
        }
        //: authImgV.snp.makeConstraints { make in
        authImgV.snp.makeConstraints { make in
            //: make.centerY.equalTo(nickNameLabel)
            make.centerY.equalTo(nickNameLabel)
            //: make.leading.equalTo(loungeImgV.snp.trailing).offset(4)
            make.leading.equalTo(loungeImgV.snp.trailing).offset(4)
            //: make.width.equalTo(16)
            make.width.equalTo(16)
            //: make.height.equalTo(16)
            make.height.equalTo(16)
        }
        //: newImgV.snp.makeConstraints { make in
        newImgV.snp.makeConstraints { make in
            //: make.centerY.equalTo(nickNameLabel)
            make.centerY.equalTo(nickNameLabel)
            //: make.leading.equalTo(authImgV.snp.trailing).offset(4)
            make.leading.equalTo(authImgV.snp.trailing).offset(4)
            //: make.width.equalTo(26)
            make.width.equalTo(26)
            //: if LanguageManager.shared.direction == .rightToLeft {
            if ManagerThen.shared.direction == .rightToLeft {
                //: make.height.equalTo(16)
                make.height.equalTo(16)
                //: } else {
            } else {
                //: make.height.equalTo(14)
                make.height.equalTo(14)
            }
        }
        //: officialImgV.snp.makeConstraints { make in
        officialImgV.snp.makeConstraints { make in
            //: make.centerY.equalTo(nickNameLabel)
            make.centerY.equalTo(nickNameLabel)
            //: make.leading.equalTo(newImgV.snp.trailing).offset(4)
            make.leading.equalTo(newImgV.snp.trailing).offset(4)
            //: make.width.greaterThanOrEqualTo(50)
            make.width.greaterThanOrEqualTo(50)
            //: make.height.equalTo(16)
            make.height.equalTo(16)
        }
        //: timeLab.snp.makeConstraints { make in
        timeLab.snp.makeConstraints { make in
            //: make.centerY.equalTo(nickNameLabel)
            make.centerY.equalTo(nickNameLabel)
            //: make.trailing.equalToSuperview().offset(-15)
            make.trailing.equalToSuperview().offset(-15)
        }
        //: imtimateBtn.snp.makeConstraints { make in
        imtimateBtn.snp.makeConstraints { make in
            //: make.centerY.equalTo(msgShowLabel)
            make.centerY.equalTo(msgShowLabel)
            //: make.width .equalTo(50)
            make.width.equalTo(50)
            //: make.trailing.equalToSuperview().offset(-15)
            make.trailing.equalToSuperview().offset(-15)
        }
        //: msgShowLabel.snp.makeConstraints { make in
        msgShowLabel.snp.makeConstraints { make in
            //: make.bottom.equalTo(headImgView.snp.bottom).offset(-6)
            make.bottom.equalTo(headImgView.snp.bottom).offset(-6)
            //: make.leading.equalTo(nickNameLabel)
            make.leading.equalTo(nickNameLabel)
            //: make.trailing.equalTo(imtimateBtn.snp.leading).offset(-10)
            make.trailing.equalTo(imtimateBtn.snp.leading).offset(-10)
        }
    }
}
